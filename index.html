<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>SOS Mechanics - Mobile Car Services Medway</title>
<meta name="description" content="Book high-quality mobile car services in Medway, Chatham, Rochester, Strood & Gillingham. Customize your service plan and get a full quote instantly.">
<meta name="keywords" content="Mobile Mechanic, Car Service, Medway, Chatham, Rochester, Strood, Gillingham, Full Service, Oil & Filter, Brake Check">
<link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700&display=swap" rel="stylesheet">
<style>
  * { box-sizing: border-box; margin:0; padding:0; font-family: 'Inter', sans-serif; }
  body { background: #e0f7fa; color: #004d40; }
  .glass-card { background: rgba(0, 150, 136, 0.2); backdrop-filter: blur(10px); border-radius: 15px; box-shadow: 0 8px 20px rgba(0,0,0,0.15); padding: 20px; margin: 15px; transition: transform 0.3s, box-shadow 0.3s; cursor:pointer; }
  .glass-card:hover { transform: translateY(-5px); box-shadow: 0 12px 25px rgba(0,0,0,0.25); }
  h1,h2,h3 { color:#004d40; }
  button { cursor:pointer; border:none; border-radius:10px; padding:12px 20px; font-weight:600; transition:0.3s; }
  .btn-primary { background: linear-gradient(135deg, #00bfa5, #26a69a); color:white; box-shadow: 0 4px 15px rgba(0,0,0,0.2); }
  .btn-primary:hover { transform: scale(1.05); }
  .btn-emergency { background: linear-gradient(135deg, #ff7043, #ff5722); color:white; font-weight:bold; animation: pulse 1.5s infinite; }
  @keyframes pulse { 0% {box-shadow:0 0 0 0 rgba(255,87,34,0.7);} 70% {box-shadow:0 0 0 10px rgba(255,87,34,0);} 100% {box-shadow:0 0 0 0 rgba(255,87,34,0);} }
  .services-section { display:flex; flex-wrap:wrap; justify-content:center; margin:30px 10px; }
  .service-items { display:none; margin-top:10px; }
  .service-items li { margin:5px 0; }
  #cartBtn, #emergencyBtn { position:fixed; bottom:20px; padding:15px 20px; z-index:1000; }
  #cartBtn { right:20px; background:#00bfa5; color:white; border-radius:10px; }
  #emergencyBtn { left:20px; background:#ff5722; color:white; border-radius:10px; }
  #cartOverlay { position:fixed; bottom:70px; right:20px; width:300px; max-height:400px; overflow-y:auto; background:rgba(0,150,136,0.25); backdrop-filter: blur(10px); padding:15px; border-radius:15px; display:none; z-index:1000; }
  .progress-bar { width:100%; height:10px; background:#b2dfdb; border-radius:5px; margin:20px 0; overflow:hidden; }
  .progress { height:100%; width:0%; background:#00bfa5; transition:width 0.3s; }
  #ticket { display:none; position:fixed; top:50%; left:50%; transform:translate(-50%, -50%); background: rgba(0,191,165,0.3); backdrop-filter:blur(15px); padding:25px; border-radius:15px; z-index:2000; width:90%; max-width:400px; box-shadow:0 10px 25px rgba(0,0,0,0.3); }
  #ticket h2 { text-align:center; }
  #ticket ul { margin:15px 0; }
  .ticket-actions { display:flex; justify-content:space-between; margin-top:15px; }
  .form-section { margin:20px 10px; display:flex; flex-direction:column; gap:15px; }
  input, select { padding:10px; border-radius:10px; border:none; background: rgba(0,191,165,0.2); color:#004d40; }
  footer { margin-top:50px; padding:20px; text-align:center; background: rgba(0,191,165,0.15); backdrop-filter: blur(10px); border-radius:15px; color:#004d40; }
  @media(max-width:768px){ .services-section { flex-direction:column; align-items:center; } #cartOverlay { width:90%; bottom:80px; } }
</style>
</head>
<body>

<!-- Hero -->
<section class="hero glass-card" style="margin:20px; text-align:center;">
  <h1>SOS Mechanics</h1>
  <p>Mobile Car Services in Medway, Chatham, Rochester, Strood & Gillingham</p>
  <button class="btn-primary" id="startBuilder">Build Your Service Plan</button>
</section>

<!-- Emergency & Cart buttons -->
<button id="emergencyBtn" class="btn-emergency">Emergency</button>
<button id="cartBtn">My Service Plan - £0.00</button>

<!-- Cart Overlay -->
<div id="cartOverlay">
  <h3>Service Plan</h3>
  <ul id="cartItems"></ul>
  <strong>Total: £<span id="cartTotal">0.00</span></strong>
</div>

<!-- Services Section -->
<section class="services-section" id="baseServices">
  <div class="service-card" data-name="Basic Service" data-price="100" data-time="1h 25m">
    <h3>Basic Service – £100</h3>
    <p>1h 25m</p>
    <div class="service-items">
      <ul>
        <li>Oil & Filter <span class="counter">1</span></li>
        <li>Brake Check <span class="counter">1</span></li>
        <li>Fluid Top-Up <span class="counter">1</span></li>
      </ul>
    </div>
  </div>
  <div class="service-card" data-name="Interim Service" data-price="150" data-time="1h 50m">
    <h3>Interim Service – £150</h3>
    <p>1h 50m</p>
    <div class="service-items">
      <ul>
        <li>Oil & Filter <span class="counter">1</span></li>
        <li>Brake Check <span class="counter">1</span></li>
        <li>Fluid Top-Up <span class="counter">1</span></li>
        <li>Air Filter Replacement <span class="counter">1</span></li>
        <li>Battery Check <span class="counter">1</span></li>
      </ul>
    </div>
  </div>
  <div class="service-card" data-name="Full Service" data-price="250" data-time="2h 25m">
    <h3>Full Service – £250</h3>
    <p>2h 25m</p>
    <div class="service-items">
      <ul>
        <li>Oil & Filter <span class="counter">1</span></li>
        <li>Brake Check <span class="counter">1</span></li>
        <li>Fluid Top-Up <span class="counter">1</span></li>
        <li>Tyre Inspection <span class="counter">1</span></li>
        <li>Battery Check <span class="counter">1</span></li>
        <li>Air Filter Replacement <span class="counter">1</span></li>
        <li>Wiper Blade Replacement <span class="counter">1</span></li>
      </ul>
    </div>
  </div>
</section>

<!-- Form Section -->
<section class="form-section" id="contactForm">
  <input type="text" id="name" placeholder="Full Name" required>
  <input type="text" id="phone" placeholder="Phone Number" required>
  <input type="text" id="vehicle" placeholder="Vehicle Model" required>
  <input type="text" id="reg" placeholder="Registration Number" required>
  <input type="datetime-local" id="datetime" required>
  <textarea id="notes" placeholder="Additional Notes"></textarea>
  <button class="btn-primary" id="submitWhatsApp">Submit & Send to WhatsApp</button>
</section>

<!-- Service Booking Ticket -->
<div id="ticket">
  <h2>Service Booking</h2>
  <p id="ticketName"></p>
  <p id="ticketReg"></p>
  <ul id="ticketItems"></ul>
  <p><strong>Total: £<span id="ticketTotal">0.00</span></strong></p>
  <div class="ticket-actions">
    <button id="downloadTicket" class="btn-primary">Download</button>
    <button id="closeTicket" class="btn-primary">Close</button>
  </div>
</div>

<!-- Footer -->
<footer>
  <p>&copy; <span id="year"></span> SOS Mechanics | Mobile Car Services Medway, Chatham, Rochester, Strood & Gillingham</p>
  <p><a href="tel:07405937104">Call +44 7405 937104</a></p>
</footer>

<script src="https://cdn.jsdelivr.net/npm/qrcode@1.5.1/build/qrcode.min.js"></script>
<script>
  document.getElementById('year').textContent = new Date().getFullYear();

  const servicePlan = [];
  const cartBtn = document.getElementById('cartBtn');
  const cartOverlay = document.getElementById('cartOverlay');
  const cartItems = document.getElementById('cartItems');
  const cartTotalEl = document.getElementById('cartTotal');

  // Toggle cart
  cartBtn.addEventListener('click', () => { cartOverlay.style.display = cartOverlay.style.display === 'none' ? 'block' : 'none'; });

  // Toggle service items and add to cart
  document.querySelectorAll('.service-card').forEach(card => {
    card.addEventListener('click', () => {
      // Show/hide items
      const items = card.querySelector('.service-items');
      items.style.display = items.style.display === 'none' ? 'block' : 'none';

      // Clear previous selection of base
      if (!servicePlan.find(s => s.baseSelected)) {
        const baseService = { name: card.dataset.name, price: parseFloat(card.dataset.price), time: card.dataset.time, baseSelected:true };
        servicePlan.push(baseService);
        updateCart();
        alert(`${baseService.name} added to service plan`);
      }
    });
  });

  function updateCart() {
    let total = 0;
    cartItems.innerHTML = '';
    servicePlan.forEach(item => {
      total += item.price;
      const li = document.createElement('li');
      li.textContent = `${item.name} - £${item.price}`;
      cartItems.appendChild(li);
    });
    cartTotalEl.textContent = total.toFixed(2);
    cartBtn.textContent = `My Service Plan - £${total.toFixed(2)}`;
  }

  // WhatsApp Submission
  document.getElementById('submitWhatsApp').addEventListener('click', () => {
    const name = document.getElementById('name').value.trim();
    const phone = document.getElementById('phone').value.trim();
    const vehicle = document.getElementById('vehicle').value.trim();
    const reg = document.getElementById('reg').value.trim();
    const datetime = document.getElementById('datetime').value;
    const notes = document.getElementById('notes').value.trim();

    if (!name || !phone || !vehicle || !reg || !datetime) { alert('Please fill all required fields'); return; }

    // Generate ticket
    document.getElementById('ticketName').textContent = `Name: ${name}`;
    document.getElementById('ticketReg').textContent = `Reg: ${reg}`;
    const ticketItems = document.getElementById('ticketItems');
    ticketItems.innerHTML = '';
    let total = 0;
    servicePlan.forEach(item => {
      const li = document.createElement('li');
      li.textContent = `${item.name} - £${item.price}`;
      ticketItems.appendChild(li);
      total += item.price;
    });
    document.getElementById('ticketTotal').textContent = total.toFixed(2);

    // Generate QR code
    QRCode.toCanvas(document.createElement('canvas'), `SOS Mechanics Booking: ${name} ${reg} Total: £${total}`, function (error, canvas) {
      if (!error) {
        ticketItems.appendChild(canvas);
      }
    });

    document.getElementById('ticket').style.display = 'block';
  });

  // Close ticket
  document.getElementById('closeTicket').addEventListener('click', () => {
    document.getElementById('ticket').style.display = 'none';
    servicePlan.length = 0;
    updateCart();
    cartOverlay.style.display = 'none';
  });

  // Download ticket
  document.getElementById('downloadTicket').addEventListener('click', () => {
    html2canvas(document.getElementById('ticket')).then(canvas => {
      const link = document.createElement('a');
      link.download = 'ServiceBooking.png';
      link.href = canvas.toDataURL();
      link.click();
    });
  });
</script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/html2canvas/1.4.1/html2canvas.min.js"></script>
</body>
</html>