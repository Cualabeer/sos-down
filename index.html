<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>SOS Mechanics Service Plan - Neumorphic</title>
<link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700&display=swap" rel="stylesheet">
<style>
body{margin:0;font-family:'Inter',sans-serif;background:#e0f2f1;color:#333;}
h1,h2,h3{margin:0;padding:0;}
button{cursor:pointer;font-family:'Inter',sans-serif;}

/* Hero */
#hero{height:100vh;background:#00bfa5;color:#fff;display:flex;flex-direction:column;align-items:center;justify-content:center;text-align:center;padding:20px;}
#hero h1{font-size:2.5rem;margin-bottom:20px;}
#hero p{font-size:1.2rem;margin-bottom:30px;}
#startPlanBtn{padding:15px 30px;background:#e0f2f1;color:#00bfa5;font-weight:700;border:none;border-radius:20px;box-shadow:8px 8px 15px #b2dfdb,-8px -8px 15px #ffffff;transition:0.3s;}
#startPlanBtn:hover{transform:scale(1.05);}

/* Floating buttons */
#cartMinBtn,#emergencyBtn{position:fixed;bottom:20px;padding:12px 18px;border:none;border-radius:20px;font-weight:700;color:#333;z-index:1000;box-shadow:5px 5px 12px #b2dfdb,-5px -5px 12px #ffffff;}
#cartMinBtn{right:90px;background:#00bfa5;color:#fff;}
#emergencyBtn{right:20px;background:#ff6f00;color:#fff;animation:flash 1s infinite alternate;}
@keyframes flash{0%{opacity:1;}50%{opacity:0.4;}100%{opacity:1;}}

/* Service Panel */
#servicePanel{position:fixed;top:0;right:-420px;width:400px;height:100%;background:#e0f2f1;border-left:3px solid #00bfa5;box-shadow:-4px 0 18px rgba(0,0,0,0.2);overflow-y:auto;transition:0.4s;z-index:1000;padding:20px;border-radius:0 0 0 20px;}
#servicePanel.open{right:0;}
.step{display:none;}
.step.active{display:block;}
.step-header{margin-bottom:10px;font-weight:700;font-size:1.1rem;}

/* Neumorphic cards */
.card{background:#e0f2f1;padding:15px;margin-bottom:10px;border-radius:20px;cursor:pointer;display:flex;justify-content:space-between;align-items:center;box-shadow:5px 5px 10px #b2dfdb,-5px -5px 10px #ffffff;transition:0.3s;}
.card:hover{box-shadow:inset 5px 5px 10px #b2dfdb,inset -5px -5px 10px #ffffff;}

/* Addons title */
.addons-title{font-weight:700;margin-top:20px;margin-bottom:10px;}

/* Inputs */
input,select{width:100%;padding:12px;margin:5px 0 15px 0;border:none;border-radius:20px;background:#e0f2f1;box-shadow:inset 5px 5px 10px #b2dfdb,inset -5px -5px 10px #ffffff;}

/* Cart */
#cartItemsPanel div{display:flex;justify-content:space-between;padding:5px 0;}
#cartOverlay{display:none;position:fixed;top:0;right:0;width:350px;height:100%;background:#e0f2f1;box-shadow:-4px 0 20px rgba(0,0,0,0.2);padding:20px;z-index:1000;overflow-y:auto;border-radius:20px 0 0 20px;}

/* Toast */
#toast{position:fixed;top:20px;left:50%;transform:translateX(-50%);background:#00bfa5;color:#fff;padding:12px 20px;border-radius:20px;display:none;z-index:2000;font-weight:700;}

/* Ticket Modal */
#ticketModal{display:none;position:fixed;top:0;left:0;width:100%;height:100%;background:rgba(0,0,0,0.5);justify-content:center;align-items:center;z-index:3000;}
#ticketContent{background:#e0f2f1;padding:20px;border-radius:25px;width:90%;max-width:400px;position:relative;text-align:center;box-shadow:8px 8px 20px #b2dfdb,-8px -8px 20px #ffffff;}
#ticketContent h3{margin-bottom:10px;color:#00bfa5;}
#downloadTicket{position:absolute;top:15px;right:15px;background:#00bfa5;color:#fff;padding:8px 12px;border:none;border-radius:10px;cursor:pointer;}

/* Footer */
footer{background:#004d40;color:#fff;padding:20px;text-align:center;}
footer a{color:#fff;text-decoration:underline;}
</style>
</head>
<body>

<!-- Hero -->
<section id="hero">
  <h1>Welcome to SOS Mechanics</h1>
  <p>Create your personalized service plan and book your vehicle today!</p>
  <button id="startPlanBtn">Start Your Service Plan</button>
</section>

<!-- Floating Buttons -->
<button id="cartMinBtn">My Service Plan</button>
<button id="emergencyBtn">Emergency</button>

<!-- Service Panel Accordion -->
<div id="servicePanel">
  <!-- Step 1: Base + Add-ons -->
  <div class="step active" id="step1">
    <div class="step-header">Step 1: Choose Base Package</div>
    <div id="basePackages">
      <div class="card" data-name="Brake Service" data-price="120" data-time="60">Brake Service - £120 - 1 hr</div>
      <div class="card" data-name="Oil & Filter Basic" data-price="70" data-time="60">Oil & Filter Basic - £70 - 1 hr</div>
      <div class="card" data-name="Oil & Filter Interim" data-price="120" data-time="85">Oil & Filter Interim - £120 - 1h 25min</div>
    </div>
    <div class="addons-title">Add-ons</div>
    <div id="addons">
      <div class="card" data-name="Air Filter" data-price="25" data-time="15">Air Filter - £25 - 15min</div>
      <div class="card" data-name="Cabin Filter" data-price="20" data-time="10">Cabin Filter - £20 - 10min</div>
      <div class="card" data-name="Wheel Alignment" data-price="80" data-time="40">Wheel Alignment - £80 - 40min</div>
      <div class="card" data-name="Battery Check" data-price="30" data-time="20">Battery Check - £30 - 20min</div>
    </div>
    <button id="next1" style="background:#00bfa5;color:#fff;padding:10px 15px;border:none;border-radius:20px;">Next</button>
  </div>

  <!-- Step 2: Date/Time -->
  <div class="step" id="step2">
    <div class="step-header">Step 2: Choose Date & Time</div>
    <input type="date" id="serviceDate">
    <select id="serviceTime">
      <option value="9">9:00</option>
      <option value="10">10:00</option>
      <option value="11">11:00</option>
      <option value="12">12:00</option>
      <option value="13">13:00</option>
      <option value="14">14:00</option>
      <option value="15">15:00</option>
      <option value="16">16:00</option>
    </select>
    <button id="next2" style="background:#00bfa5;color:#fff;padding:10px 15px;border:none;border-radius:20px;">Next</button>
  </div>

  <!-- Step 3: Contact/Car Details -->
  <div class="step" id="step3">
    <div class="step-header">Step 3: Enter Contact & Car Details</div>
    <input type="text" id="custName" placeholder="Full Name" required>
    <input type="tel" id="custPhone" placeholder="Phone Number" required>
    <input type="text" id="custPlate" placeholder="Number Plate" required>
    <input type="text" id="custLocation" placeholder="Your Location" required>
    <button id="next3" style="background:#00bfa5;color:#fff;padding:10px 15px;border:none;border-radius:20px;">Next</button>
  </div>

  <!-- Step 4: Confirmation -->
  <div class="step" id="step4">
    <div class="step-header">Step 4: Confirm & Send</div>
    <div id="cartItemsPanel"></div>
    <div>Total: £<span id="cartTotalPanel">0</span></div>
    <div>Estimated Time: <span id="cartTimePanel">0</span> mins</div>
    <button id="submitWhatsApp" style="background:#00796b;color:#fff;padding:12px 20px;border:none;border-radius:20px;">Send via WhatsApp</button>
  </div>
</div>

<!-- Toast -->
<div id="toast"></div>

<!-- VIP Ticket Modal -->
<div id="ticketModal" style="display:flex;">
  <div id="ticketContent">
    <button id="downloadTicket">Download</button>
    <h3>VIP Service Ticket</h3>
    <div>Name: <span id="ticketName"></span></div>
    <div>Number Plate: <span id="ticketPlate"></span></div>
    <div>Package: <span id="ticketPackage"></span></div>
    <div id="ticketTime"></div>
    <div id="ticketQR"></div>
  </div>
</div>

<!-- Footer -->
<footer>
  &copy; <span id="year"></span> SOS Mechanics | <a href="tel:07405937104">Call +44 7405 937104</a> | Servicing Medway, Chatham, Rochester, Strood & Gillingham
</footer>

<script src="https://cdnjs.cloudflare.com/ajax/libs/html2canvas/1.4.1/html2canvas.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/qrcodejs/1.0.0/qrcode.min.js"></script>
<script>
  document.getElementById('year').textContent=new Date().getFullYear();
  const servicePanel=document.getElementById('servicePanel');
  const steps=[document.getElementById('step1'),document.getElementById('step2'),document.getElementById('step3'),document.getElementById('step4')];
  let currentStep=0; const cart=[];

  // Hero CTA
  document.getElementById('startPlanBtn').addEventListener('click',()=>{servicePanel.classList.add('open');});

  // Step navigation
  function showStep(i){steps.forEach(s=>s.classList.remove('active'));steps[i].classList.add('active');}
  document.getElementById('next1').addEventListener('click',()=>{currentStep=1;showStep(1);updateSummary();});
  document.getElementById('next2').addEventListener('click',()=>{currentStep=2;showStep(2);updateSummary();});
  document.getElementById('next3').addEventListener('click',()=>{currentStep=3;showStep(3);updateSummary();});

  // Toast
  function showToast(msg){const t=document.getElementById('toast');t.textContent=msg;t.style.display='block';setTimeout(()=>{t.style.display='none';},1500);}

  // Add/Remove items
  document.querySelectorAll('#basePackages .card,#addons .card').forEach(card=>{
    card.addEventListener('click',()=>{
      const data={name:card.dataset.name,price:parseFloat(card.dataset.price),time:parseInt(card.dataset.time)};
      if(card.parentElement.id==='basePackages'){cart.splice(0,cart.length,data);}
      else cart.push(data);
      showToast(`${data.name} added`);
      updateSummary();
    });
  });

  // Update summary
  function updateSummary(){
    const panel=document.getElementById('cartItemsPanel');
    panel.innerHTML='';let total=0,time=0;
    cart.forEach(i=>{const div=document.createElement('div');div.textContent=`${i.name} - £${i.price} - ${i.time} mins`;panel.appendChild(div);total+=i.price;time+=i.time;});
    document.getElementById('cartTotalPanel').textContent=total;
    document.getElementById('cartTimePanel').textContent=time;
  }

  // WhatsApp
  document.getElementById('submitWhatsApp').addEventListener('click',()=>{
    const name=document.getElementById('custName').value.trim();
    const phone=document.getElementById('custPhone').value.trim();
    const plate=document.getElementById('custPlate').value.trim().toUpperCase().replace(/[^A-Z0-9]/g,'');
    const location=document.getElementById('custLocation').value.trim();
    if(!name||!phone||!plate||!location){showToast('Fill all fields');return;}
    let msg=`SOS Mechanics Service Plan:\nName:${name}\nPhone:${phone}\nPlate:${plate}\nLocation:${location}\n\nPlan:\n`;
    cart.forEach(i=>msg+=`${i.name} - £${i.price} - ${i.time} mins\n`);
    window.open(`https://wa.me/447405937104?text=${encodeURIComponent(msg)}`,'_blank');
    showToast('Service plan sent via WhatsApp');

    document.getElementById('ticketName').textContent=name;
    document.getElementById('ticketPlate').textContent=plate;
    document.getElementById('ticketPackage').textContent=cart.map(i=>i.name).join(', ');
    document.getElementById('ticketTime').textContent=`Total Time: ${cart.reduce((a,b)=>a+b.time,0)} mins`;
    document.getElementById('ticketQR').innerHTML='';
    new QRCode(document.getElementById('ticketQR'), {text:msg,width:100,height:100});
    document.getElementById('ticketModal').style.display='flex';
  });

  // Download ticket
  document.getElementById('downloadTicket').addEventListener('click',()=>{html2canvas(document.getElementById('ticketContent')).then(canvas=>{const link=document.createElement('a');link.download='SOS_Ticket.png';link.href=canvas.toDataURL();link.click();});});

  // Floating buttons
  document.getElementById('cartMinBtn').addEventListener('click',()=>{servicePanel.classList.toggle('open');});
  document.getElementById('emergencyBtn').addEventListener('click',()=>{window.location.href='tel:07405937104';});
</script>
</body>
</html>